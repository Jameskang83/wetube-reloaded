(()=>{const e=document.querySelector("video"),t=document.getElementById("play"),s=t.querySelector("i"),n=document.getElementById("mute"),a=n.querySelector("i"),u=document.getElementById("volume"),d=document.getElementById("currenTime"),l=document.getElementById("totalTime"),m=document.getElementById("timeline"),o=document.getElementById("fullScreen"),i=o.querySelector("i"),r=document.getElementById("videoContainer"),c=document.getElementById("videoControls");let v=null,f=.5,E=null;e.volume=f;const L=t=>{e.paused?e.play():e.pause(),s.classList=e.paused?"fas fa-play":"fas fa-pause"},y=e=>new Date(1e3*e).toISOString().substring(14,19),p=()=>{l.innerText=y(Math.floor(e.duration)),m.max=Math.floor(e.duration)},g=()=>c.classList.remove("showing");t.addEventListener("click",L),n.addEventListener("click",(t=>{e.muted?e.muted=!1:e.muted=!0,a.classList=e.muted?"fas fa-volume-mute":"fas fa-volume-up",u.value=e.muted?0:f})),u.addEventListener("input",(t=>{const{target:{value:s}}=t;e.muted&&(e.muted=!1,a.classList="fas fa-volume-up"),f=s,e.volume=s,0===Number(s)?(a.classList="fas fa-volume-mute",e.muted=!0):(e.muted=!1,a.classList="fas fa-volume-up")})),e.readyState?p():e.addEventListener("loadedmetadata",p),e.addEventListener("timeupdate",(()=>{d.innerText=y(Math.floor(e.currentTime)),m.value=Math.floor(e.currentTime)})),e.addEventListener("ended",(()=>{const{id:e}=r.dataset;fetch(`/api/videos/${e}/view`,{method:"POST"})})),window.addEventListener("keyup",(e=>{" "===e.key&&L(),"f"===e.key?(r.requestFullscreen(),i.classList="fas fa-compress"):"Escape"===e.key&&(document.exitFullscreen(),i.classList="fas fa-expand")})),r.addEventListener("mousemove",(()=>{v&&(clearTimeout(v),v=null),E&&(clearTimeout(E),E=null),c.classList.add("showing"),E=setTimeout(g,3e3)})),r.addEventListener("mouseleave",(()=>{v=setTimeout(g,3e3)})),m.addEventListener("input",(t=>{const{target:{value:s}}=t;e.currentTime=s})),o.addEventListener("click",(()=>{document.fullscreenElement?(document.exitFullscreen(),i.classList="fas fa-expand"):(r.requestFullscreen(),i.classList="fas fa-compress")}))})();